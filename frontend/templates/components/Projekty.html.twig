<div {{ attributes.defaults({class: 'margin-component'}) }}>
    <div class="mb-4">
        <h4 class="h6 mb-2">Filtry</h4>
        <div class="row g-3">
            <div class="col-md-4">
                <select class="form-select form-select-sm" data-model="kategorie">
                    <option value="">Všechny kategorie</option>
                    {% for kategorieItem in this.getKategorieItems() %}
                        <option value="{{ kategorieItem.slug }}">{{ kategorieItem.Nazev }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-4">
                <select class="form-select form-select-sm" data-model="operacniProgram">
                    <option value="">Všechny operační programy</option>
                    {% for program in this.getOperacniProgramyItems() %}
                        <option value="{{ program.slug }}">{{ program.Nazev }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-4">
                <select class="form-select form-select-sm" data-model="obec">
                    <option value="">Všechny obce</option>
                    {% for obecItem in this.getObceItems() %}
                        <option value="{{ obecItem.Nazev }}">{{ obecItem.Nazev }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
    </div>

    <div class="mb-4">
        <button type="button"
                class="btn btn-outline-primary btn-sm {{ sortBy == 'Nejoblíbenější' ? 'active' : '' }}"
                data-action="live#action"
                data-live-action-param="sort"
                data-live-sort-param="Nejoblíbenější">
            Nejoblíbenější
        </button>

        <button type="button"
                class="btn btn-outline-primary btn-sm {{ sortBy == 'Nejnovější' ? 'active' : '' }}"
                data-action="live#action"
                data-live-action-param="sort"
                data-live-sort-param="Nejnovější">
            Nejnovější
        </button>

        <button type="button"
                class="btn btn-outline-primary btn-sm {{ sortBy == 'Nejstarší' ? 'active' : '' }}"
                data-action="live#action"
                data-live-action-param="sort"
                data-live-sort-param="Nejstarší">
            Nejstarší
        </button>

        <button type="button"
                class="btn btn-outline-primary btn-sm {{ sortBy == 'Nejdražší' ? 'active' : '' }}"
                data-action="live#action"
                data-live-action-param="sort"
                data-live-sort-param="Nejdražší">
            Nejdražší
        </button>

        <button type="button"
                class="btn btn-outline-primary btn-sm {{ sortBy == 'Nejlevnější' ? 'active' : '' }}"
                data-action="live#action"
                data-live-action-param="sort"
                data-live-sort-param="Nejlevnější">
            Nejlevnější
        </button>
    </div>

    <div class="row">
        {% for projekt in this.getItems() %}
            <div class="col-sm-6 col-md-4 col-lg-3 my-3">
                {% if projekt.slug %}
                    <a href="{{ path('detail_projektu', {'slug': projekt.slug}) }}" class="text-decoration-none">
                {% endif %}
                
                    <img class="img-fluid mb-2" src="{{ projekt.Obrazek.url ? projekt.Obrazek.url : asset('images/logo-symbol.svg') }}" alt="" aria-labelledby="projekt-{{ projekt.slug }}">

                    <h3 class="h5 border-top mt-2 mb-1 pt-2 fw-bold" id="projekt-{{ projekt.slug }}">{{ projekt.Nazev }}</h3>
                    
                    {% if projekt.Vyzva and projekt.Vyzva.ZdrojFinancovani %}
                        <p class="small text-secondary mb-1">{{ projekt.Vyzva.ZdrojFinancovani.Nazev }}</p>
                    {% endif %}
                    
                    {% if projekt.PrijemceDotace %}
                        <p class="small mb-1"><strong>Příjemce:</strong> {{ projekt.PrijemceDotace }}</p>
                    {% endif %}
                    
                    {% if projekt.VyseDotace %}
                        <p class="small mb-1"><strong>Výše dotace:</strong> {{ projekt.VyseDotace|number_format(0, ',', ' ') }} Kč</p>
                    {% endif %}
                    
                    {% if projekt.DobaRealizace %}
                        <p class="small text-secondary">{{ projekt.DobaRealizace }}</p>
                    {% endif %}

                {% if projekt.slug %}
                    </a>
                {% endif %}
            </div>
        {% endfor %}
    </div>
</div>
