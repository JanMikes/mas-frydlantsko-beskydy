<div {{ attributes }} class="rozjizdeci-obsahy-component margin-component" data-loading="addClass(opacity-50)">
    {% if not this.hideFilters %}
        {% if computed.getKategorieItems()|length > 1 %}
            <div class="mb-3">
                <p class="mb-2">Filtrovat podle kategorie:</p>

                <button type="button" class="button-style-filter me-2 mb-2 {{ categories|length == 0 ? 'active' : '' }}" data-action="live#action" data-live-action-param="clearFilters">
                    Všechny
                </button>

                {% for kategorieItem in computed.getKategorieItems() %}
                    <button type="button" class="button-style-filter me-2 mb-2 {{ kategorieItem.slug in categories ? 'active' : '' }}" data-action="live#action" data-live-action-param="toggleCategory" data-live-category-slug-param="{{ kategorieItem.slug }}">
                        {{ kategorieItem.Nazev }}
                    </button>
                {% endfor %}
            </div>
        {% endif %}
    {% endif %}

    {% if computed.getItems()|length == 0 %}
        <div class="alert alert-primary">V tuto chvíli nejsou vypsány žádné výzvy.</div>
    {% endif %}

    {% for vyzva in computed.getItems() %}
        {% set collapseId = 'rozjizdeci-obsah-' ~ loop.index ~ '-' ~ random(1000000) %}

        <div class="d-block">
            {% if vyzva.Nazev %}
                <div class="rozjizdeci-obsah-nadpis mb-0 collapse-toggle d-flex align-items-center justify-content-between collapsed w-100 rozjizdeci-obsah-nadpis-style-2" data-bs-toggle="collapse" data-bs-target="#{{ collapseId }}" aria-expanded="false" aria-controls="{{ collapseId }}" style="cursor: pointer;">
                    <h4 class="h5 mb-0">{{ vyzva.Nazev }}</h4>
                    <i class="bi bi-chevron-down"></i>
                </div>
            {% endif %}

            <div id="{{ collapseId }}" class="collapse">
                <div class="rozjizdeci-obsah-content">
                    <div class="pt-3">
                        <div class="vyzva-table">
                            {% if vyzva.ZahajeniVyzvy %}
                                <div class="vyzva-table-row"><strong>Zahájení výzvy:</strong> {{ vyzva.ZahajeniVyzvy|date('d.m.Y H:i') }}</div>
                            {% endif %}

                            {% if vyzva.ZahajeniPrijmuZadosti %}
                                <div class="vyzva-table-row"><strong>Zahájení příjmu žádostí o podporu:</strong> {{ vyzva.ZahajeniPrijmuZadosti|date('d.m.Y H:i') }}</div>
                            {% endif %}

                            {% if vyzva.KonecVyzvy %}
                                <div class="vyzva-table-row"><strong>Konec výzvy:</strong> {{ vyzva.KonecVyzvy|date('d.m.Y H:i') }}</div>
                            {% endif %}

                            {% if vyzva.FinancniAlokace %}
                                <div class="vyzva-table-row"><strong>Finanční alokace:</strong> {{ vyzva.FinancniAlokace|number_format(0, '', ' ') }} Kč</div>
                            {% endif %}

                            {% if vyzva.MinimalniVyseNakladu %}
                                <div class="vyzva-table-row"><strong>Minimální výše celkových způsobilých výdajů:</strong> {{ vyzva.MinimalniVyseNakladu|number_format(0, '', ' ') }} Kč</div>
                            {% endif %}

                            {% if vyzva.MaximalniVyseNakladu %}
                                <div class="vyzva-table-row"><strong>Maximální výše celkových způsobilých výdajů na jeden projekt:</strong> {{ vyzva.MaximalniVyseNakladu|number_format(0, '', ' ') }} Kč</div>
                            {% endif %}

                            {% if vyzva.OpravneniZadatele %}
                                <div class="vyzva-table-row">
                                    <strong>Opravnění žadatelé:</strong>
                                    {{ vyzva.OpravneniZadatele|markdown_to_html|newlines }}
                                </div>
                            {% endif %}
                        </div>

                        {% if vyzva.Lide %}
                            <div class="vyzva-table-row">
                                {{ component('Samosprava', {
                                    data: vyzva.Lide,
                                    hasPanel: false,
                                }) }}
                            </div>
                        {% endif %}

                        {% if vyzva.Dokumenty %}
                            <div class="vyzva-table-row">
                                {{ component('SouboryKeStazeni', {
                                    data: vyzva.Dokumenty,
                                    hasPanel: false,
                                }) }}
                            </div>
                        {% endif %}

                        <p class="button-style-2 mt-4">
                            <a href="{{ path('detail_vyzvy', {'slug': vyzva.slug}) }}">Detail výzvy <i class="bi-chevron-right"></i></a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}

    <p class="mt-4">
        <a href="{{ path('archiv_vyzev') }}" class="button-style-2">Archiv výzev &raquo;</a>
    </p>

    {% if computed.getPodporeneProjekty()|length > 0 %}
        <hr class="margin-component hr hr-normal">

        <div class="margin-component">
            <h2 class="margin-heading">Podpořené projekty</h2>

            <div class="row">
                {% for projekt in computed.getPodporeneProjekty() %}
                    {{ include('_projekt_list_item.html.twig') }}
                {% endfor %}
            </div>
        </div>
    {% endif %}
</div>

