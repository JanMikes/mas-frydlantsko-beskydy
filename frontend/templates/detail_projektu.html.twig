{% extends 'base.html.twig' %}

{% block title %}Projekt {{ projekt.Nazev }}{% endblock %}

{% block content %}
    <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
        <ol class="breadcrumb mb-3 mb-lg-5">
            <li class="breadcrumb-item"><a href="{{ path('homepage') }}">Hlavní stránka</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ projekt.Nazev }}</li>
        </ol>
    </nav>

    <div class="container py-4 section-content">
        <h1 class="mb-3 mb-lg-5"><span class="heading-border">{{ projekt.Nazev }}</span></h1>

        <div class="project-grid mb-4">
            <div class="cell d-flex">
                <img src="{{ asset('images/icon-operacni-program.svg') }}" alt="Operační program" class="me-3">
                <div>
                    <strong>Operační program</strong><br>
                    {% if projekt.Vyzva %}
                        {{ projekt.Vyzva.OperacniProgram.Nazev }}
                    {% elseif projekt.OperacniProgram %}
                        {{ projekt.OperacniProgram.Nazev }}
                    {% endif %}
                </div>
            </div>
            <div class="cell d-flex">
                <img src="{{ asset('images/icon-prijemce-dotace.svg') }}" alt="Příjemce dotace" class="me-3">
                <div>
                    <strong>Příjemce dotace</strong><br>
                    {{ projekt.PrijemceDotace }}
                </div>
            </div>
            <div class="cell d-flex">
                <img src="{{ asset('images/icon-vyse-dotace.svg') }}" alt="Výše dotace" class="me-3">
                <div>
                    <strong>Výše dotace</strong><br>
                    {{ projekt.VyseDotace|number_format(0, '', ' ') }} Kč
                </div>
            </div>
            <div class="cell d-flex">
                <img src="{{ asset('images/icon-projekt-mas-fb.svg') }}" alt="Projekt mas-fb" class="me-3">
                <div>
                    <strong>Místo realizace</strong><br>
                    {% if projekt.Obec %}
                        {{ projekt.Obec.Nazev }}
                    {% endif %}
                </div>
            </div>
            {% if projekt.ZacatekRealizace or projekt.DokonceniRealizace %}
                <div class="cell d-flex">
                    <img src="{{ asset('images/icon-doba-realizace.svg') }}" alt="Doba realizace" class="me-3">
                    <div>
                        <strong>Doba realizace</strong><br>

                        {% if projekt.ZacatekRealizace and projekt.DokonceniRealizace %}
                            {% if projekt.ZacatekRealizace|date('Y') == projekt.DokonceniRealizace|date('Y') %}
                                {{ projekt.ZacatekRealizace|date('d.m.') }} - {{ projekt.DokonceniRealizace|date('d.m.Y') }}
                            {% else %}
                                {{ projekt.ZacatekRealizace|date('d.m.Y') }} - {{ projekt.DokonceniRealizace|date('d.m.Y') }}
                            {% endif %}
                        {% elseif projekt.ZacatekRealizace %}
                            {{ projekt.ZacatekRealizace|date('d.m.Y') }}
                        {% elseif projekt.DokonceniRealizace %}
                            {{ projekt.DokonceniRealizace|date('d.m.Y') }}
                        {% endif %}
                    </div>
                </div>
            {% endif %}
        </div>

        <div class="row">
            {% if projekt.Obrazek %}
                <div class="col-md-6">
                    <img class="img-fluid mb-4" src="{{ projekt.Obrazek.url }}" alt="" aria-labelledby="projekt-{{ projekt.slug }}">

                    {% if projekt.Galerie %}
                        <div data-controller="gallery" class="margin-component">
                            <div class="row row-cols-2 g-3">
                                {% for obrazek in projekt.Galerie.Obrazek %}
                                    {% if obrazek.Obrazek %}
                                        <div class="col d-flex align-items-center justify-content-center {{ loop.index > projekt.Galerie.Pocet_zobrazenych ? 'd-none' }}" data-gallery-target="item">
                                            <a href="{{ obrazek.Obrazek.large.url ? obrazek.Obrazek.large.url : obrazek.Obrazek.url }}" class="glightbox d-block img-fluid" {% if obrazek.Popis %}data-glightbox="description: {{ obrazek.Popis }}"{% endif %}>
                                                <img src="{{ obrazek.Obrazek.thumbnail ? obrazek.Obrazek.thumbnail.url : obrazek.Obrazek.url }}" alt="{{ obrazek.Popis }}" title="{{ obrazek.Popis }}">
                                            </a>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>

                            {% if projekt.Galerie.Obrazek|length > projekt.Galerie.Pocet_zobrazenych %}
                                <button class="btn btn-primary mt-3" data-gallery-target="button" data-action="click->gallery#showMore">Zobrazit více</button>
                            {% endif %}
                        </div>
                    {% endif %}

                </div>
            {% endif %}

            <div class="{{ projekt.Obrazek ? 'col-md-6' : 'col-md-12' }}">
                {% if projekt.Text %}
                    {{ projekt.Text|markdown_to_html|newlines }}
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}
